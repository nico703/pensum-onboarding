{% extends "base.html" %}

{% block title %}Vertragsdetails{% endblock %}

{% block content %}
<div class="container mt-5">
    <!-- Fortschrittsleiste -->
    <div class="progress mb-4" style="height: 25px;">
        <div class="progress-bar bg-success" role="progressbar" style="width: 40%;" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100">
            Schritt 2 von 5 – Vertragsdetails
        </div>
    </div>

    <h2>Vertragsdetails</h2>
    <form method="POST" class="mt-4 bg-white p-4 rounded shadow-sm">

        <div class="mb-3">
            <label for="position" class="form-label">Position</label>
            <input type="text" class="form-control" id="position" name="position" value="{{ employee.position or '' }}">
        </div>

        <div class="mb-3">
            <label for="start_date" class="form-label">Eintrittsdatum</label>
            <input type="date" class="form-control" id="start_date" name="start_date" value="{{ employee.start_date.strftime('%Y-%m-%d') if employee.start_date else '' }}">
        </div>

        <div class="mb-3">
            <label for="location" class="form-label">Niederlassung</label>
            <select class="form-select" id="location" name="location">
                <option value="">Bitte auswählen</option>
                {% for city in ["Berlin", "Hamburg", "München"] %}
                <option value="{{ city }}" {% if employee.location == city %}selected{% endif %}>{{ city }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="mb-3">
            <label for="employment_type" class="form-label">Beschäftigungsart</label>
            <select class="form-select" id="employment_type" name="employment_type">
                <option value="">Bitte auswählen</option>
                {% for art in ["Vollzeit", "Teilzeit", "Minijob"] %}
                <option value="{{ art }}" {% if employee.employment_type == art %}selected{% endif %}>{{ art }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="mb-3">
            <label for="vacation_days" class="form-label">Urlaubstage</label>
            <input type="number" class="form-control" id="vacation_days" name="vacation_days" value="{{ employee.vacation_days or '' }}">
        </div>

        <div class="mb-3">
            <label for="homeoffice" class="form-label">Homeoffice</label>
            <select class="form-select" id="homeoffice" name="homeoffice" onchange="toggleHomeofficeOptions()">
                <option value="">Bitte auswählen</option>
                <option value="Ja" {% if employee.homeoffice == 'Ja' %}selected{% endif %}>Ja</option>
                <option value="Nein" {% if employee.homeoffice == 'Nein' %}selected{% endif %}>Nein</option>
            </select>
        </div>

        <div class="mb-3" id="homeoffice-options" style="display: {{ 'block' if employee.homeoffice == 'Ja' else 'none' }}">
            <label for="homeoffice_detail" class="form-label">Homeoffice Regelung</label>
            <select class="form-select" id="homeoffice_detail" name="homeoffice_detail">
                <option value="">Bitte auswählen</option>
                {% for opt in ["1–2 Tage", "3 Tage", "Nach Absprache"] %}
                <option value="{{ opt }}" {% if employee.homeoffice_detail == opt %}selected{% endif %}>{{ opt }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="d-flex justify-content-between">
            <a href="{{ url_for('create') }}" class="btn btn-secondary">Zurück</a>
            <button type="submit" class="btn btn-success">Weiter</button>
        </div>
    </form>
</div>

<script>
    function toggleHomeofficeOptions() {
        const homeoffice = document.getElementById("homeoffice").value;
        const detail = document.getElementById("homeoffice-options");
        detail.style.display = (homeoffice === "Ja") ? "block" : "none";
    }
</script>
{% endblock %}